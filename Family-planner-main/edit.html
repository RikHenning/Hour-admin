<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link href='https://fonts.googleapis.com/css?family=Aladin' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="Gory2.css" />
	<title>Edit page</title>
</head>
<body>
	<form id='editTaskForm'>
				  <div class="form-group row">
				    <label for="inputTask" class="col-sm-2 col-form-label">New Task</label>
				    <div class="col-sm-10">
				      <input type="text" class="form-control" id="editTaskName" required>
				    </div>
				  </div>
				  <div class="form-group row">
				    <label for="inputDescription" class="col-sm-2 col-form-label">Description</label>
				    <div class="col-sm-10">
				      <input type="text" class="form-control" id="editDescription" placeholder="Description">
				    </div>
				    <div class="form-group row">
				    <label for="inputDueDate" class="col-sm-2 col-form-label">Due Date</label>
				    <div class="col-sm-10">
				      <input type="date" class="form-control" id="editDueDate" placeholder="Due Date">
				    </div>
				  </div>
				  <fieldset class="form-group">
				    <div class="row">
				      <legend class="col-form-label col-sm-2 pt-0">Priority</legend>
				      <div class="col-sm-10">
				      	<div class="form-check">
						  <input class="form-check-input" type="radio" name="flexRadioDefault" id="editPriorityLow">
						  <label class="form-check-label" for="flexRadioDefault1">
						    Low
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="radio" name="flexRadioDefault" id="editPriorityMedium">
						  <label class="form-check-label" for="flexRadioDefault2">
						    Medium
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="radio" name="flexRadioDefault" id="editPriorityHigh">
						  <label class="form-check-label" for="flexRadioDefault3">
						    High
						  </label>
						</div>
				      </div>
				    </div>
				  </fieldset>
				  <div class="form-group row">
				    <select class="form-select" aria-label="Default select example" id='editCategory'>
					  <option selected>Open this select menu</option>
					  <option value="Work" name='Work'>Work</option>
					  <option value="Personal" name="Personal">Personal</option>
					  <option value="Shopping" name='Shopping'>Shopping</option>
					  <option value="Garden" name='Garden'>Garden</option>
					</select>

				    <div class="col-sm-10">
				      <button type="submit" class="btn btn-primary" id="saveButton">Save Task</button>
				    </div>
				  </div>
				 
				</form>




<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
<script src="Adams.js"></script>

<script>
	const editTaskForm = document.getElementById('editTaskForm');
	const urlParams = new URLSearchParams(window.location.search);
    const taskId = urlParams.get('id');
    const intergeId = parseInt(taskId);
    const editTask = getTaskById(intergeId);

    const updatedTaskName = document.getElementById('editTaskName');
    updatedTaskName.value = editTask.taskName;
    const updatedDescription = document.getElementById('editDescription');
    updatedDescription.value = editTask.description;
    const updatedDueDate = document.getElementById('editDueDate');
    updatedDueDate.value = editTask.dueDate;
    let updatedPriority = '';
	    if (editTask.priority === 'Low') {
	    	updatedPriority = document.getElementById('editPriorityLow');
	    	updatedPriority.checked = true;
	    } else if (editTask.priority === 'Medium') {
	    	updatedPriority = document.getElementById('editPriorityMedium');
	    	updatedPriority.checked = true;
	    } else if (editTask.priority === 'High') {
	    	updatedPriority = document.getElementById('editPriorityHigh');
	    	updatedPriority.checked = true;
	    };
    let updatedCategory = '';
    	let editCategory = document.getElementById('editCategory')
    	const oldCategory = editTask.category;
    	var i ;
    	for (i = 0; i < editCategory.children.length ; i++) {
    		if (editCategory.children[i].value === oldCategory ) {
    			editCategory.children[i].selected = true;
    		}
    	}
    const saveButton = document.getElementById('saveButton')
    	saveButton.addEventListener('click', () => {
  		window.location.replace('testmodal.html');
});

    
editTaskForm.addEventListener("submit", (event) => {
	saveEditTask(event,intergeId);
});

</script>
</body>
</html>